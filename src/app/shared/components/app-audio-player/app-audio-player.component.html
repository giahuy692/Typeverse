<div class="p-6 max-w-4xl mx-auto text-white font-sans bg-[#1e1e2f] space-y-6">

  <!-- Header -->
  <div class="text-center">
    <h1 class="text-2xl font-bold text-white">ğŸ§  Luyá»‡n Táº­p Ká»¹ NÄƒng Nghe â€“ NÃ³i â€“ Video</h1>
    <p class="text-sm text-gray-400 mt-1">Cháº¿ Ä‘á»™ hiá»‡n táº¡i: <span class="text-emerald-400 font-bold">{{ currentMode
        }}</span></p>
  </div>
  <!-- Ã‚m lÆ°á»£ng vÃ  táº¯t/má»Ÿ nháº¡c ná»n -->
  <div *ngIf="isListeningMode" class="space-y-2">
    <label for="volume">ğŸ”Š Ã‚m lÆ°á»£ng ná»n:</label>
    <input type="range" id="volume" min="0" max="1" step="0.05" [value]="backgroundMusic.volume"
      (input)="updateBackgroundVolume($any($event.target).value)" class="w-full accent-emerald-400" />
    <button (click)="toggleBackgroundMute()" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded">
      {{ backgroundMuted ? 'ğŸ”‡ Báº­t láº¡i nháº¡c ná»n' : 'ğŸ”ˆ Táº¯t nháº¡c ná»n' }}
    </button>
  </div>

  <!-- Chuyá»ƒn cháº¿ Ä‘á»™ -->
  <div class="flex justify-center gap-4">
    <button (click)="toggleMode()" class="bg-emerald-600 hover:bg-emerald-700 px-4 py-2 rounded">
      {{ isListeningMode ? 'ğŸ” Chuyá»ƒn sang NÃ³i' : 'ğŸ” Chuyá»ƒn sang Nghe' }}
    </button>
    <button (click)="toggleVideoMode()" class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded">
      ğŸ¥ Video BÃ i Há»c
    </button>
  </div>

  <button (click)="openAnswerPiP()" class="bg-yellow-500 hover:bg-yellow-600 px-4 py-1 text-sm rounded">
    ğŸªŸ Má»Ÿ Answer PiP
  </button>

  <!-- Cháº¿ Ä‘á»™ Nghe/NÃ³i -->
  <div *ngIf="currentQuestion && !isVideoMode" class="space-y-4 bg-[#2b2b40] p-4 rounded shadow">
    <h2 class="text-xl text-emerald-300 font-semibold">{{ currentQuestion.question }}</h2>
    <p class="text-gray-200 italic">{{ currentQuestion.answer }}</p>

    <div *ngIf="isCountdown" class="text-center text-4xl text-yellow-400 font-bold">
      {{ countdown }}s
    </div>

    <div *ngIf="showEffect" class="text-center text-pink-400 font-bold animate-pulse">
      ğŸ”ˆ Äang phÃ¡t cÃ¢u tráº£ lá»i máº«u...
    </div>
  </div>

  <!-- VIDEO PLAYLIST -->
  <div *ngIf="isVideoMode" class="space-y-6">
    <h2 class="text-lg text-center text-pink-300 font-semibold">ğŸ“º Danh sÃ¡ch Video</h2>

    <ul class="space-y-2">
      <li *ngFor="let video of videoPlaylist">
        <button (click)="playVideo(video)"
          class="w-full text-left bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded">
          â–¶ï¸ {{ video.title }}
        </button>
      </li>
    </ul>

    <!-- Video Ä‘ang phÃ¡t -->
    <div *ngIf="selectedVideo && showVideo" class="mt-4 space-y-2">
      <h3 class="text-emerald-400 text-lg">{{ selectedVideo.title }}</h3>
      <video #videoPlayer class="w-full rounded" [src]="selectedVideo.videoPath" [volume]="videoVolume"
        [playbackRate]="videoSpeed" controls autoplay></video>
      <div class="bg-black/70 text-white text-center text-sm px-4 py-2 rounded">{{ selectedVideo.subtitle }}</div>
    </div>

  </div>
</div>