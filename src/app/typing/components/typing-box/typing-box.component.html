<!-- âœ… typing-box.component.html -->

<!-- âœ… Äiá»u hÆ°á»›ng qua láº¡i ná»™i dung -->
<div class="flex justify-between mb-4">
  <button
    (click)="previousText()"
    class="nav-btn prev"
    [disabled]="currentIndex === 0"
  >â† BÃ i trÆ°á»›c</button>

  <button
    (click)="nextText()"
    class="nav-btn next"
    [disabled]="currentIndex >= textList.length - 1"
  >BÃ i tiáº¿p â†’</button>
</div>

<div #typingContainer tabindex="0" (keydown)="handleKeyPress($event)" class="typing-box">
  <div class="typing-stats">
    <span>âœ”ï¸ {{ correctCount }} / {{ textToType.length }}</span>

    <!-- Chá»‰ hiá»ƒn thá»‹ náº¿u lÃ  cháº¿ Ä‘á»™ 'timed' -->
    <span class="timer" *ngIf="typingMode === 'timed'">
      â±ï¸ {{ countdownValue }}s
    </span>

  </div>


  <div class="typing-content">
    <ng-container *ngFor="let char of textToType.split(''); let i = index">
      <span class="typing-char" [ngClass]="{
          'correct': userInput[i] === char,
          'incorrect': userInput[i] && userInput[i] !== char,
          'caret': i === userInput.length && !sessionEnded
        }">
        {{ char === ' ' ? 'Â ' : char }}
      </span>
    </ng-container>
  </div>
</div>

<!-- âœ… Báº£ng káº¿t quáº£ hiá»‡n Ä‘áº¡i sau khi háº¿t giá» -->
<div *ngIf="sessionEnded" class="result-box-modern">
  <h3 class="result-heading">
    ğŸ¯ Káº¿t quáº£ phiÃªn gÃµ
  </h3>
  <div class="result-grid">
    <div class="result-item-block">
      <p class="label">KÃ½ tá»± Ä‘Ãºng</p>
      <p class="value green">{{ correctCount }}</p>
    </div>
    <div class="result-item-block">
      <p class="label">KÃ½ tá»± sai</p>
      <p class="value red">{{ incorrectCount }}</p>
    </div>
    <div class="result-item-block">
      <p class="label">Tá»•ng Ä‘Ã£ gÃµ</p>
      <p class="value blue">{{ userInput.length }}</p>
    </div>
    <div class="result-item-block">
      <p class="label">TG gÃµ</p>
      <p class="value blue">{{ elapsedTimeInSeconds }}s</p>
    </div>
  </div>
</div>